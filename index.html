<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Portal Dra. Alba Patricia | K.B Tech</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;700;800&display=swap');
        body { 
            font-family: 'Plus Jakarta Sans', sans-serif; 
            background: linear-gradient(135deg, #ffffff 0%, #fff5f7 100%);
            min-height: 100vh;
        }
        .glass-card { 
            background: rgba(255, 255, 255, 0.8); 
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 192, 203, 0.3);
            border-radius: 2.5rem;
        }
        #modal-privacidad:target { display: flex; }
    </style>
</head>
<body class="flex flex-col items-center justify-center min-h-screen p-4">

    <aside class="fixed left-0 top-0 h-full w-16 hover:w-48 bg-white/80 backdrop-blur-md border-r border-pink-100 transition-all duration-300 z-50 overflow-hidden group shadow-xl">
        <div class="flex flex-col h-full py-6">
            <div class="px-4 mb-10 font-black text-purple-400 italic tracking-tighter text-xl">K.B</div>
            <nav class="flex-grow space-y-4">
                <a href="asistente.html" class="flex items-center px-4 py-3 text-slate-400 hover:text-purple-400 hover:bg-pink-50 transition">
                    <span class="text-xl">üìã</span>
                    <span class="ml-4 opacity-0 group-hover:opacity-100 font-bold text-xs tracking-widest uppercase">Asistente</span>
                </a>
                <a href="dra_alba.html" class="flex items-center px-4 py-3 text-slate-400 hover:text-purple-400 hover:bg-pink-50 transition">
                    <span class="text-xl">üë©‚Äç‚öïÔ∏è</span>
                    <span class="ml-4 opacity-0 group-hover:opacity-100 font-bold text-xs tracking-widest uppercase">Dra. Alba</span>
                </a>
            </nav>
            <div class="mt-auto px-4 py-6 border-t border-pink-50 text-center">
                 <p class="text-[8px] font-black text-slate-300 uppercase tracking-widest group-hover:block hidden uppercase">Soporte T√©cnico K.B</p>
            </div>
        </div>
    </aside>

    <div class="fixed top-0 right-0 p-8 opacity-20 pointer-events-none select-none z-0">
        <span class="text-7xl">ü™∑</span>
    </div>
    <div class="fixed bottom-0 right-10 p-8 opacity-20 pointer-events-none select-none z-0 rotate-12">
        <span class="text-8xl">üå∏</span>
    </div>

    <main class="glass-card p-10 w-full max-w-lg shadow-2xl relative z-10">
        <header class="mb-8 text-center">
            <h1 class="text-3xl font-bold text-slate-700 tracking-tight italic">Dra. Alba <span class="text-pink-400">Patricia</span></h1>
            <p class="text-[10px] text-slate-400 uppercase tracking-[0.3em] mt-2 font-black">Agenda de Citas M√©dicas</p>
        </header>

        <div class="space-y-4">
            <input type="text" id="p-nombre" class="w-full p-4 rounded-2xl bg-white border border-pink-50 focus:border-pink-300 outline-none transition" placeholder="Nombre completo">
            <input type="text" id="p-tel" class="w-full p-4 rounded-2xl bg-white border border-pink-50 focus:border-pink-300 outline-none transition" placeholder="WhatsApp / Tel√©fono">
            <input type="date" id="p-fecha" class="w-full p-4 rounded-2xl bg-white border border-pink-50 focus:border-pink-300 outline-none transition">
            <textarea id="p-motivo" class="w-full p-4 rounded-2xl bg-white border border-pink-50 focus:border-pink-300 outline-none transition h-24" placeholder="Motivo de la consulta"></textarea>

            <button onclick="enviarCita()" id="btn-confirmar" class="w-full py-5 bg-pink-400 text-white font-black rounded-2xl hover:bg-pink-500 transition-all shadow-lg shadow-pink-200 mt-4 uppercase tracking-widest text-sm">
                Confirmar Solicitud
            </button>
            
            <p class="text-[9px] text-center text-slate-400 mt-4 font-medium uppercase tracking-tighter">
                SISTEMA PROTEGIDO POR EL <a href="#modal-privacidad" class="text-pink-400 underline font-bold">AVISO DE PRIVACIDAD</a>
            </p>
        </div>
    </main>

    <footer class="mt-8 text-center relative z-10">
        <p class="text-[11px] font-black text-slate-800 uppercase tracking-[0.4em] mb-1">
            K.B TECH SOLUTIONS
        </p>
        <p class="text-[9px] text-slate-400 font-bold uppercase tracking-widest">
            Powered by <span class="text-pink-400">K.B Tech Solutions</span>
        </p>
    </footer>

    <div id="modal-privacidad" class="fixed inset-0 bg-slate-900/60 backdrop-blur-sm z-[100] hidden items-center justify-center p-6">
        <div class="bg-white rounded-[2.5rem] p-8 max-w-md shadow-2xl relative">
            <a href="#" class="absolute top-4 right-6 text-2xl text-slate-300 hover:text-pink-400">√ó</a>
            <h2 class="text-xl font-black text-slate-800 mb-4 uppercase tracking-tighter border-b border-slate-100 pb-2 text-left">Aviso de Privacidad</h2>
            <div class="text-[11px] text-slate-500 leading-relaxed space-y-3 h-64 overflow-y-auto pr-2 text-left">
                <p>En **K.B Tech Solutions**, la seguridad de tus datos es nuestra prioridad. La informaci√≥n recolectada (Nombre, Tel√©fono, Motivo de Consulta) tiene como √∫nico fin la gesti√≥n de citas m√©dicas con la Dra. Alba Patricia.</p>
                <p>Tus datos son procesados mediante el **Motor K.B** con encriptaci√≥n de grado m√©dico y no ser√°n compartidos con terceros sin tu consentimiento expreso.</p>
                <p>Cumplimos con la Ley Federal de Protecci√≥n de Datos Personales en Posesi√≥n de los Particulares.</p>
                <p>Para dudas t√©cnicas: Soporte K.B Tech Solutions.</p>
            </div>
            <a href="#" class="block w-full mt-6 py-3 bg-slate-800 text-white text-center rounded-xl font-bold text-[10px] uppercase tracking-widest">Aceptar y Cerrar</a>
        </div>
    </div>

    <script>
        const SUPABASE_URL = "https://ypxtceahtjxcdaefskxe.supabase.co"; 
        const SUPABASE_KEY = "sb_publishable_C9j37Nup330TMa-jb3QC4A_z7GhzEBM"; 

        async function enviarCita() {
            const btn = document.getElementById('btn-confirmar');
            const nombreVal = document.getElementById('p-nombre').value;
            const telVal = document.getElementById('p-tel').value;
            const fechaVal = document.getElementById('p-fecha').value;
            const motivoVal = document.getElementById('p-motivo').value;

            if(!nombreVal || !telVal || !fechaVal) {
                alert("‚ö†Ô∏è Por favor completa los campos obligatorios.");
                return;
            }

            const datosCita = {
                nombre: nombreVal,
                telefono: telVal,
                fecha: fechaVal,
                motivo: motivoVal,
                prioridad_ia: "Pendiente",
                estado_contacto: "Nuevo"
            };

            btn.innerText = "SINCRONIZANDO...";
            btn.disabled = true;

            try {
                const response = await fetch(`${SUPABASE_URL}/rest/v1/Citas`, {
                    method: 'POST',
                    headers: {
                        'apikey': SUPABASE_KEY,
                        'Authorization': `Bearer ${SUPABASE_KEY}`,
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(datosCita)
                });

                if (response.ok) {
                    alert("‚úÖ ¬°Cita sincronizada con √©xito por el Motor K.B!");
                    location.reload();
                } else {
                    alert("‚ùå Error del Motor K.B.");
                    btn.innerText = "REINTENTAR";
                    btn.disabled = false;
                }
            } catch (error) {
                alert("üì° Error de red.");
                btn.innerText = "CONFIRMAR SOLICITUD";
                btn.disabled = false;
            }
        }
    </script>
</body>
</html>















