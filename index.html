<script>
    // üóùÔ∏è CONFIGURACI√ìN DEL MOTOR K.B SOLUTIONS
    const SUPABASE_URL = "https://ypxtceahtjxcdaefskxe.supabase.co"; 
    const SUPABASE_KEY = "PEGA_AQU√ç_TU_LLAVE_LARGA_ANON"; 

    async function enviarCita() {
        const datos = {
            nombre: document.getElementById('p-nombre').value,
            telefono: document.getElementById('p-tel').value, // Aseg√∫rate que el id sea 'p-tel' o 'p-telefono'
            fecha: document.getElementById('p-fecha').value,
            motivo: document.getElementById('p-motivo').value,
            estado: 'Pendiente'
        };

        // Validaci√≥n r√°pida
        if(!datos.nombre || !datos.telefono) return alert("Por favor completa tus datos.");

        try {
            const response = await fetch(`${SUPABASE_URL}/rest/v1/Citas`, {
                method: 'POST',
                headers: {
                    'apikey': SUPABASE_KEY,
                    'Authorization': `Bearer ${SUPABASE_KEY}`,
                    'Content-Type': 'application/json',
                    'Prefer': 'return=minimal'
                },
                body: JSON.stringify(datos)
            });

            if (response.ok) {
                alert("¬°Cita registrada en Motor K.B con √©xito!");
                location.reload();
            } else {
                const error = await response.json();
                console.log(error);
                alert("Error en el Motor: " + error.message);
            }
        } catch (e) {
            alert("Error de conexi√≥n con el servidor K.B");
        }
    }
</script>




